<!DOCTYPE html>
<html>
<head>
    <title>Range Slider with Vertical Lines</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <style>
      
    </style>
</head>
<body>
    <div class="container mt-5">
        <h3>Range Slider</h3>
        <div class="slider-container">
            <input type="text" id="slider2" class="slider" />
        </div>

        <div class="form-group">
            <label for="audienceEarnings">Audience Earnings:</label>
            <input type="text" class="form-control" id="audienceEarnings" readonly>
          </div>
    </div>



	<script src="js/rSlider.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <script>
        
        (function () {
            'use strict';

            var init = function () {                

                var slider2 = new rSlider({
                    target: '#slider2',
                    values: ['+$50', '$10k', '$20k', '$30k', '$40k', '$50k', '$60k', '$70k', '$80k', '$90k', '$100k'],
                    range: false,
                    set: ['+$50k'],
                    tooltip: false,
                    labels: false,
                    onChange: function (vals, activePointer) {

                        console.log(vals);
                        debugger
                        let activeSpan =  $('.rs-scale').find("span")[activePointer];
                        $('.rs-scale').find("span").removeClass("activePointer");
                        $('.rs-scale').find("span .rs-transparent-rectangle").remove();
                        $(activeSpan).append(`<div class="rs-transparent-rectangle"></div>`);
                        $(activeSpan).addClass("activePointer");
                       // $(activeSpan).attr("data-earnings", 4.80);
                        calculateAudienceEarnings(activeSpan);
                    }
                });

                var slider3 = new rSlider({
                    target: '#slider3',
                    values: {min: 0, max: 100},
                    step: 10,
                    range: true,
                    set: [10, 40],
                    scale: true,
                    labels: false,
                    onChange: function (vals) {
                        console.log(vals);
                    }
                });

                var slider = new rSlider({
                    target: '#slider',
                    values: [2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015],
                    range: true,
                    set: [2010, 2013],
                    onChange: function (vals) {
                        console.log(vals);
                    }
                });
            };
            window.onload = init;



             // Update audience earnings on input change
            $('#earningsPerView, #slider2, #ownershipPercentage').on('input', calculateAudienceEarnings);

            // Calculate audience earnings
            function calculateAudienceEarnings(activeElem) {
                debugger
            var views = parseInt($('#slider2').val());
            var percentage = parseFloat(0.24) / 100;
            var earningsPerView = parseFloat(0.005);
            var audienceEarnings = (views * earningsPerView) * percentage;
            $(activeElem).attr("data-earnings", "$" + audienceEarnings.toFixed(2));

            $('#audienceEarnings').val(audienceEarnings.toFixed(2));
            }

            // Format number with commas
            function formatNumber(number) {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
        })();
    </script>
</body>
</html>
